<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="豪翔天下,Python开发工程师,全栈开发工程师" />





  <link rel="alternate" href="/atom.xml" title="豪翔天下" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="豪翔天下的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="豪翔天下">
<meta property="og:url" content="https://haofly.net/page/5/index.html">
<meta property="og:site_name" content="豪翔天下">
<meta property="og:description" content="豪翔天下的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="豪翔天下">
<meta name="twitter:description" content="豪翔天下的个人博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://haofly.net/page/5/"/>





  <title> 豪翔天下 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47480072-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d06802e96e214bdb413a40b263d4cc15";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">豪翔天下</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Change My World by Program</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-favorites">
          <a href="/favorites.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-flag"></i> <br />
            
            menu.favorites
          </a>
        </li>
      
        
        <li class="menu-item menu-item-wiki">
          <a href="https://wiki.haofly.net" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-key"></i> <br />
            
            menu.wiki
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/pdb-	debug-python/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/pdb-	debug-python/" itemprop="url">
                  使用PDB调试Python程序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-11T17:18:07+08:00">
                2015-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/pdb-	debug-python/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="pdb-	debug-python/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>pdb是Python自带的类gdb、cdb的调试工具。</p>
<p>在Sublime Text的SublimeREPL插件提供了pdb调试应用程序的功能，但是由于手上项目package太过复杂，所以这次我就直接在Django<br>代码要调试的地方插入pdb代码，这样相当于直接在那个地方下了一个断点。可以在任何地方插入如下代码进行中断，即使是Django也能通过这种方式进行调试：</p>
<pre><code>import pdb; pdb.set_trace()
</code></pre><p>pdb常用命令：</p>
<ul>
<li>n：执行下一行</li>
<li>s：执行下一行，如果有函数，会进入函数体</li>
<li>c：让程序正常运行，直到遇到断点</li>
<li>p：<strong>打印某个变量</strong></li>
<li>！：感叹号后面跟一个语句，可以直接改变某个变量</li>
<li>h：帮助</li>
<li>l：列出当前将要运行的代码块</li>
<li>b：设置断点，例如’b 12’表示在第12行下端点，’b a.py:12’表示在a.py这个文件的第12行下断点</li>
<li>cl：清楚所有的断点</li>
<li>j：跳到指定的行数</li>
<li>a：打印当前函数的参数</li>
<li>q：推出调试</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/laravel-container/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/laravel-container/" itemprop="url">
                  [转]Laravel学习笔记——神奇的服务容器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-10T20:11:49+08:00">
                2015-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/laravel-container/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="laravel-container/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文地址：<a href="https://www.insp.top/learn-laravel-container" target="_blank" rel="external">https://www.insp.top/learn-laravel-container</a></p>
<p>转注：本文详细介绍了依赖注入以及Laravel IoC容器的原理，深入浅出，十分容易让人理解。</p>
<p><strong>控制反转(IoC)</strong>：由外部负责其依赖需求的行为</p>
<p><strong>依赖注入(DI)</strong>：只要不是由内部生产，而是由外部以参数或其他形式注入的，都属于依赖注入</p>
<blockquote>
<p>容器，字面上理解就是装东西的东西。常见的变量、对象属性等都可以算是容器。一个容器能够装什么，全部取决于你对该容器的定义。当然，有这样一种容器，它存放的不是文本、数值，而是对象、对象的描述（类、接口）或者是提供对象的回调，通过这种容器，我们得以实现许多高级的功能，其中最常提到的，就是 “解耦”、“依赖注入（DI）”。本文就从这里开始。</p>
</blockquote>
<h1 id="IoC-容器，-laravel-的核心"><a href="#IoC-容器，-laravel-的核心" class="headerlink" title="IoC 容器， laravel 的核心"></a>IoC 容器， laravel 的核心</h1><p>Laravel 的核心就是一个 IoC 容器，根据文档，称其为“服务容器”，顾名思义，该容器提供了整个框架中需要的一系列服务。作为初学者，很多人会在这一个概念上犯难，因此，我打算从一些基础的内容开始讲解，通过理解面向对象开发中依赖的产生和解决方法，来逐渐揭开“依赖注入”的面纱，逐渐理解这一神奇的设计理念。</p>
<p><em>本文一大半内容都是通过举例来让读者去理解什么是 IoC（控制反转） 和 DI（依赖注入），通过理解这些概念，来更加深入。更多关于 laravel 服务容器的用法建议阅读文档即可。</em></p>
<h1 id="IoC-容器诞生的故事"><a href="#IoC-容器诞生的故事" class="headerlink" title="IoC 容器诞生的故事"></a>IoC 容器诞生的故事</h1><p>讲解 IoC 容器有很多的文章，我之前也写过。但现在我打算利用当下的灵感重新来过，那么开始吧。</p>
<h2 id="超人和超能力，依赖的产生！"><a href="#超人和超能力，依赖的产生！" class="headerlink" title="超人和超能力，依赖的产生！"></a>超人和超能力，依赖的产生！</h2><p>面向对象编程，有以下几样东西无时不刻的接触：接口、类还有对象。这其中，接口是类的原型，一个类必须要遵守其实现的接口；对象则是一个类实例化后的产物，我们称其为一个实例。当然这样说肯定不利于理解，我们就实际的写点中看不中用的代码辅助学习。</p>
<blockquote>
<p>怪物横行的世界，总归需要点超级人物来摆平。_</p>
</blockquote>
<p>我们把一个“超人”作为一个类，</p>
<pre><code>class Superman {}
</code></pre><p>我们可以想象，一个超人诞生的时候肯定拥有至少一个超能力，这个超能力也可以抽象为一个对象，为这个对象定义一个描述他的类吧。一个超能力肯定有多种属性、（操作）方法，这个尽情的想象，但是目前我们先大致定义一个只有属性的“超能力”，至于能干啥，我们以后再丰富：</p>
<pre><code>class Power {
    /**
     * 能力值
     */
    protected $ability;
    /**
     * 能力范围或距离
     */
    protected $range;

    public function __construct($ability, $range)
    {
        $this-&gt;ability = $ability;
        $this-&gt;range = $range;
    }
}
</code></pre><p>这时候我们回过头，修改一下之前的“超人”类，让一个“超人”创建的时候被赋予一个超能力：</p>
<pre><code>class Superman
{
    protected $power;

    public function __construct()
    {
        $this-&gt;power = new Power(999, 100);
    }
}
</code></pre><p>这样的话，当我们创建一个“超人”实例的时候，同时也创建了一个“超能力”的实例，但是，我们看到了一点，“超人”和“超能力”之间不可避免的产生了一个依赖。</p>
<blockquote>
<p>所谓“依赖”，就是“我若依赖你，少了你就没有我”。</p>
</blockquote>
<p>在一个贯彻面向对象编程的项目中，这样的依赖随处可见。少量的依赖并不会有太过直观的影响，我们随着这个例子逐渐铺开，让大家慢慢意识到，当依赖达到一个量级时，是怎样一番噩梦般的体验。当然，我也会自然而然的讲述如何解决问题。</p>
<h2 id="一堆乱麻-——-可怕的依赖"><a href="#一堆乱麻-——-可怕的依赖" class="headerlink" title="一堆乱麻 —— 可怕的依赖"></a>一堆乱麻 —— 可怕的依赖</h2><p>之前的例子中，超能力类实例化后是一个具体的超能力，但是我们知道，超人的超能力是多元化的，每种超能力的方法、属性都有不小的差异，没法通过一种类描述完全。我们现在进行修改，我们假设超人可以有以下多种超能力：</p>
<ul>
<li><p>飞行，属性有：飞行速度、持续飞行时间</p>
</li>
<li><p>蛮力，属性有：力量值</p>
</li>
<li><p>能量弹，属性有：伤害值、射击距离、同时射击个数</p>
<p>我们创建了如下类：</p>
</li>
</ul>
<pre><code>class Flight
{
    protected $speed;
    protected $holdtime;
    public function __construct($speed, $holdtime) {}
}

class Force
{
    protected $force;
    public function __construct($force) {}
}

class Shot
{
    protected $atk;
    protected $range;
    protected $limit;
    public function __construct($atk, $range, $limit) {}
}
</code></pre><p><em>为了省事儿我没有详细写出<code>construct()</code>这个构造函数的全部，只写了需要传递的参数。</em></p>
<p>好了，这下我们的超人有点“忙”了。在超人初始化的时候，我们会根据需要来实例化其拥有的超能力吗，大致如下：</p>
<pre><code>class Superman
{
    protected $power;

    public function __construct()
    {
        $this-&gt;power = new Fight(9, 100);
        // $this-&gt;power = new Force(45);
        // $this-&gt;power = new Shot(99, 50, 2);
        /*
        $this-&gt;power = array(
            new Force(45),
            new Shot(99, 50, 2)
        );
        */
    }
}
</code></pre><p>我们需要自己手动的在构造函数内（或者其他方法里）实例化一系列需要的类，这样并不好。可以想象，假如需求变更（不同的怪物横行地球），需要更多的有针对性的 新的超能力，或者需要 变更 超能力的方法，我们必须 重新改造超人。换句话说就是，改变超能力的同时，我还得重新制造个超人。效率太低了！新超人还没创造完成世界早已被毁灭。</p>
<blockquote>
<p>这时，灵机一动的人想到：为什么不可以这样呢？超人的能力可以被随时更换，只需要添加或者更新一个芯片或者其他装置啥的（想到钢铁侠没）。这样的话就不要整个重新来<br>过了。</p>
</blockquote>
<p>对，就是这样的。</p>
<p>我们不应该手动在 “超人” 类中固化了他的 “超能力” 初始化的行为，而转由外部负责，由外部创造超能力模组、装置或者芯片等（我们后面统一称为“模组”），植入超人体内的某一个接口，这个接口是一个既定的，只要这个 “模组”满足这个接口的装置都可以被超人所利用，可以提升、增加超人的某一种能力。这种由外部负责其依赖需求的行为，我们可以称其为 “控制反转（IoC）”。</p>
<h2 id="工厂模式，依赖转移！"><a href="#工厂模式，依赖转移！" class="headerlink" title="工厂模式，依赖转移！"></a>工厂模式，依赖转移！</h2><p>当然，实现控制反转的方法有几种。在这之前，不如我们先了解一些好玩的东西。</p>
<blockquote>
<p>我们可以想到，组件、工具（或者超人的模组），是一种可被生产的玩意儿，生产的地方当然是 “工厂（Factory）”，于是有人就提出了这样一种模式：<br>工厂模式。</p>
</blockquote>
<p>工厂模式，顾名思义，就是一个类所以依赖的外部事物的实例，都可以被一个或多个 “工厂” 创建的这样一种开发模式，就是 “工厂模式”。</p>
<p>我们为了给超人制造超能力模组，我们创建了一个工厂，它可以制造各种各样的模组，且仅需要通过一个方法：</p>
<pre><code>class SuperModuleFactory
{
    public function makeModule($moduleName, $options)
    {
        switch ($moduleName) {
            case &apos;Fight&apos;:   return new Fight($options[0], $options[1]);
            case &apos;Force&apos;:   return new Force($options[0]);
            case &apos;Shot&apos;:    return new Shot($options[0], $options[1], $options[2]);
        }
    }
}
</code></pre><p>这时候，超人 创建之初就可以使用这个工厂！</p>
<pre><code>class Superman
{
    protected $power;

    public function __construct()
    {
        // 初始化工厂
        $factory = new SuperModuleFactory;

        // 通过工厂提供的方法制造需要的模块
        $this-&gt;power = $factory-&gt;makeModule(&apos;Fight&apos;, [9, 100]);
        // $this-&gt;power = $factory-&gt;makeModule(&apos;Force&apos;, [45]);
        // $this-&gt;power = $factory-&gt;makeModule(&apos;Shot&apos;, [99, 50, 2]);
        /*
        $this-&gt;power = array(
            $factory-&gt;makeModule(&apos;Force&apos;, [45]),
            $factory-&gt;makeModule(&apos;Shot&apos;, [99, 50, 2])
        );
        */
    }
}
</code></pre><p>可以看得出，我们不再需要在超人初始化之初，去初始化许多第三方类，只需初始化一个工厂类，即可满足需求。但这样似乎和以前区别不大，只是没有那么多 new关键字。其实我们稍微改造一下这个类，你就明白，工厂类的真正意义和价值了。</p>
<pre><code>class Superman
{
    protected $power;

    public function __construct(array $modules)
    {
        // 初始化工厂
        $factory = new SuperModuleFactory;

        // 通过工厂提供的方法制造需要的模块
        foreach ($modules as $moduleName =&gt; $moduleOptions) {
            $this-&gt;power[] = $factory-&gt;makeModule($moduleName, $moduleOptions);
        }
    }
}

// 创建超人
$superman = new Superman([
    &apos;Fight&apos; =&gt; [9, 100], 
    &apos;Shot&apos; =&gt; [99, 50, 2]
    ]);
</code></pre><p>现在修改的结果令人满意。现在，“超人” 的创建不再依赖任何一个 “超能力” 的类，我们如若修改了或者增加了新的超能力，只需要针对修改<code>SuperModuleFactory</code>即可。扩充超能力的同时不再需要重新编辑超人的类文件，使得我们变得很轻松。但是，这才刚刚开始。</p>
<h2 id="再进一步！IoC-容器的重要组成-——-依赖注入！"><a href="#再进一步！IoC-容器的重要组成-——-依赖注入！" class="headerlink" title="再进一步！IoC 容器的重要组成 —— 依赖注入！"></a>再进一步！IoC 容器的重要组成 —— 依赖注入！</h2><p>由 “超人” 对 “超能力” 的依赖变成 “超人” 对 “超能力模组工厂”的依赖后，对付小怪兽们变得更加得心应手。但这也正如你所看到的，依赖并未解除，只是由原来对多个外部的依赖变成了对一个 “工厂”的依赖。假如工厂出了点麻烦，问题变得就很棘手。</p>
<blockquote>
<p>其实大多数情况下，工厂模式已经足够了。工厂模式的缺点就是：接口未知（即没有一个很好的契约模型，关于这个我马上会有解释）、产生对象类型单一。总之就是，还是不够灵活。虽然如此，工厂模式依旧十分优秀，并且适用于绝大多数情况。不过我们为了讲解后面的 依赖注入 ，这里就先夸大一下工厂模式的缺陷咯。</p>
</blockquote>
<p>我们知道，超人依赖的模组，我们要求有统一的接口，这样才能和超人身上的注入接口对接，最终起到提升超能力的效果。</p>
<p>事实上，我之前说谎了，不仅仅只有一堆小怪兽，还有更多的大怪兽。嘿嘿。额，这时候似乎工厂的生产能力显得有些不足 ——由于工厂模式下，所有的模组都已经在工厂类中安排好了，如果有新的、高级的模组加入，我们必须修改工厂类（好比增加新的生产线）：</p>
<pre><code>class SuperModuleFactory
{
    public function makeModule($moduleName, $options)
    {
        switch ($moduleName) {
            case &apos;Fight&apos;:   return new Fight($options[0], $options[1]);
            case &apos;Force&apos;:   return new Force($options[0]);
            case &apos;Shot&apos;:    return new Shot($options[0], $options[1], $options[2]);
            // case &apos;more&apos;: .......
            // case &apos;and more&apos;: .......
            // case &apos;and more&apos;: .......
            // case &apos;oh no! its too many!&apos;: .......
        }
    }
}
</code></pre><p>看到没。。。噩梦般的感受！</p>
<blockquote>
<p>其实灵感就差一步！你可能会想到更为灵活的办法！对，下一步就是我们今天的主要配角 —— DI （依赖注入）</p>
</blockquote>
<p>由于对超能力模组的需求不断增大，我们需要集合整个世界的高智商人才，一起解决问题，不应该仅仅只有几个工厂垄断负责。不过高智商人才们都非常自负，认为自己的想法是对的，创造出的超能力模组没有统一的接口，自然而然无法被正常使用。这时我们需要提出一种契约，这样无论是谁创造出的模组，都符合这样的接口，自然就可被正常使用。</p>
<pre><code>interface SuperModuleInterface
{
    /**
     * 超能力激活方法
     *
     * 任何一个超能力都得有该方法，并拥有一个参数
     *@param array $target 针对目标，可以是一个或多个，自己或他人
     */
    public function activate(array $target);
}
</code></pre><blockquote>
<p>上文中，我们定下了一个接口 （超能力模组的规范、契约），所有被创造的模组必须遵守该规范，才能被生产。</p>
<p>其实，这就是 php 中 接口（ interface ） 的用处和意义！很多人觉得，为什么 php 需要接口这种东西？难道不是 java 、 C#之类的语言才有的吗？这么说，只要是一个正常的面向对象编程语言（虽然 php 可以面向过程），都应该具备这一特性。因为一个 对象（object）本身是由他的模板或者原型 —— 类 （class） ，经过实例化后产生的一个具体事物，而有时候，实现统一种方法且不同功能（或特性）的时候，会存在很多的类（class），这时候就需要有一个契约，让大家编写出可以被随时替换却不会产生影响的接口。这种由编程语言本身提出的硬性规范，会增加更多优秀的特性。</p>
<p>虽然有些绕，但通过我们接下来的实例，大家会慢慢领会接口带来的好处。</p>
</blockquote>
<p>这时候，那些提出更好的超能力模组的高智商人才，遵循这个接口，创建了下述（模组）类：</p>
<pre><code>/**
 * X-超能量
 */
class XPower implements SuperModuleInterface
{
    public function activate(array $target)
    {
        // 这只是个例子。。具体自行脑补
    }
}

/**
 * 终极炸弹 （就这么俗）
 */
class UltraBomb implements SuperModuleInterface
{
    public function activate(array $target)
    {
        // 这只是个例子。。具体自行脑补
    }
}
</code></pre><p>同时，为了防止有些 “砖家” 自作聪明，或者一些叛徒恶意捣蛋，不遵守契约胡乱制造模组，影响超人，我们对超人初始化的方法进行改造：</p>
<pre><code>class Superman
{
    protected $module;

    public function __construct(SuperModuleInterface $module)
    {
        $this-&gt;module = $module
    }
}
</code></pre><p>改造完毕！现在，当我们初始化 “超人” 类的时候，提供的模组实例必须是一个 SuperModuleInterface 接口的实现。否则就会提示错误。</p>
<p>正是由于超人的创造变得容易，一个超人也就不需要太多的超能力，我们可以创造多个超人，并分别注入需要的超能力模组即可。这样的话，虽然一个超人只有一个超能力，但超人更容易变多，我们也不怕怪兽啦！</p>
<blockquote>
<p>现在有人疑惑了，你要讲的 依赖注入 呢？</p>
<p>其实，上面讲的内容，正是依赖注入。</p>
</blockquote>
<p>什么叫做 依赖注入？</p>
<p>本文从开头到现在提到的一系列依赖，只要不是由内部生产（比如初始化、构造函数 __construct 中通过工厂方法、自行手动 new的），而是由外部以参数或其他形式注入的，都属于 依赖注入（DI） 。是不是豁然开朗？事实上，就是这么简单。下面就是一个典型的依赖注入：</p>
<pre><code>// 超能力模组
$superModule = new XPower;

// 初始化一个超人，并注入一个超能力模组依赖
$superMan = new Superman($superModule);
</code></pre><p>关于依赖注入这个本文的主要配角，也就这么多需要讲的。理解了依赖注入，我们就可以继续深入问题。慢慢走近今天的主角……</p>
<h2 id="更为先进的工厂-——-IoC-容器！"><a href="#更为先进的工厂-——-IoC-容器！" class="headerlink" title="更为先进的工厂 —— IoC 容器！"></a>更为先进的工厂 —— IoC 容器！</h2><p>刚刚列了一段代码：</p>
<pre><code>$superModule = new XPower;

$superMan = new Superman($superModule);
</code></pre><p>读者应该看出来了，手动的创建了一个超能力模组、手动的创建超人并注入了刚刚创建超能力模组。呵呵，手动。</p>
<blockquote>
<p>现代社会，应该是高效率的生产，干净的车间，完美的自动化装配。</p>
</blockquote>
<p>一群怪兽来了，如此低效率产出超人是不现实，我们需要自动化 —— 最多一条指令，千军万马来相见。我们需要一种高级的生产车间，我们只需要向生产车间提交一个脚本，工厂便能够通过指令自动化生产。这种更为高级的工厂，就是工厂模式的升华 —— IoC 容器。</p>
<pre><code>class Container
{
    protected $binds;

    protected $instances;

    public function bind($abstract, $concrete)
    {
        if ($concrete instanceof Closure) {
            $this-&gt;binds[$abstract] = $concrete;
        } else {
            $this-&gt;instances[$abstract] = $concrete;
        }
    }

    public function make($abstract, $parameters = [])
    {
        if (isset($this-&gt;instances[$abstract])) {
            return $this-&gt;instances[$abstract];
        }

        array_unshift($parameters, $this);

        return call_user_func_array($this-&gt;binds[$abstract], $parameters);
    }
}
</code></pre><p>这时候，一个十分粗糙的容器就诞生了。现在的确很简陋，但不妨碍我们进一步提升他。先着眼现在，看看这个容器如何使用吧！</p>
<pre><code>// 创建一个容器（后面称作超级工厂）
$container = new Container;

// 向该 超级工厂 添加 超人 的生产脚本
$container-&gt;bind(&apos;superman&apos;, function($container, $moduleName) {
    return new Superman($container-&gt;make($moduleName));
});

// 向该 超级工厂 添加 超能力模组 的生产脚本
$container-&gt;bind(&apos;xpower&apos;, function($container) {
    return new XPower;
});

// 同上
$container-&gt;bind(&apos;ultrabomb&apos;, function($container) {
    return new UltraBomb;
});

// ******************  华丽丽的分割线  **********************
// 开始启动生产
$superman_1 = $container-&gt;make(&apos;superman&apos;, [&apos;xpower&apos;]);
$superman_2 = $container-&gt;make(&apos;superman&apos;, [&apos;ultrabomb&apos;]);
$superman_3 = $container-&gt;make(&apos;superman&apos;, [&apos;xpower&apos;]);
// ...随意添加
</code></pre><p>看到没？通过最初的 绑定（bind） 操作，我们向 超级工厂 注册了一些生产脚本，这些生产脚本在生产指令下达之时便会执行。发现没有？我们彻底的解除了 超人与 超能力模组 的依赖关系，更重要的是，容器类也丝毫没有和他们产生任何依赖！我们通过注册、绑定的方式向容器中添加一段可以被执行的回调（可以是匿名函数、非匿名函数、类的方法）作为生产一个类的实例的 脚本 ，只有在真正的 生产（make） 操作被调用执行时，才会触发。</p>
<p>这样一种方式，使得我们更容易在创建一个实例的同时解决其依赖关系，并且更加灵活。当有新的需求，只需另外绑定一个“生产脚本”即可。</p>
<blockquote>
<p>实际上，真正的 IoC 容器更为高级。我们现在的例子中，还是需要手动提供超人所需要的模组参数，但真正的 IoC<br>容器会根据类的依赖需求，自动在注册、绑定的一堆实例中搜寻符合的依赖需求，并自动注入到构造函数参数中去。Laravel框架的服务容器正是这么做的。实现这种功能其实理论上并不麻烦，但我并不会在本文中写出，因为……我懒得写。</p>
<p>不过我告诉大家，这种自动搜寻依赖需求的功能，是通过 反射（Reflection） 实现的，恰好的，php 完美的支持反射机制！关于反射，php官方文档有详细的资料，并且中文翻译基本覆盖，足够学习和研究！</p>
<p><a href="http://php.net/manual/zh/book.reflection.php" target="_blank" rel="external">http://php.net/manual/zh/book.reflection.php</a></p>
</blockquote>
<p>现在，到目前为止，我们已经不再惧怕怪兽们了。高智商人才集思广益，井井有条，根据接口契约创造规范的超能力模组。超人开始批量产出。最终，人人都是超人，你也可以是哦 ！</p>
<h1 id="回归正常世界。我们开始重新审视-laravel-的核心。"><a href="#回归正常世界。我们开始重新审视-laravel-的核心。" class="headerlink" title="回归正常世界。我们开始重新审视 laravel 的核心。"></a>回归正常世界。我们开始重新审视 laravel 的核心。</h1><p>现在，我们开始慢慢解读 laravel 的核心。其实，laravel 的核心就是一个 IoC 容器，也恰好是我之前所说的高级的 IoC 容器。</p>
<p>可以说，laravel 的核心本身十分轻量，并没有什么很神奇很实质性的应用功能。很多人用到的各种功能模块比如Route（路由）、EloquentORM（数据库 ORM 组件）、Request and Response（请求和响应）等等等等，实际上都是与核心无关的类模块提供的，这些类从注册到实例化，最终被你所使用，其实都是 laravel的服务容器负责的。</p>
<p>我们以大家最常见的 Route 类作为例子。大家可能经常见到路由定义是这样的：</p>
<pre><code>Route::get(&apos;/&apos;, function() {
    // bla bla bla...
});
</code></pre><p>实际上， Route 类被定义在这个命名空间：Illuminate\Routing\Router，文件vendor/laravel/framework/sr<br>c/Illuminate/Routing/Router.php。</p>
<p>我们通过打开发现，这个类的这一系列方法，如 get，post，any 等都不是静态（static）方法，这是怎么一回事儿？不要急，我们继续。</p>
<h2 id="服务提供者"><a href="#服务提供者" class="headerlink" title="服务提供者"></a>服务提供者</h2><p>我们在前文介绍 IoC 容器的部分中，提到了，一个类需要绑定、注册至容器中，才能被“制造”。</p>
<p>对，一个类要被容器所能够提取，必须要先注册至这个容器。既然 laravel称这个容器叫做服务容器，那么我们需要某个服务，就得先注册、绑定这个服务到容器，那么提供服务并绑定服务至容器的东西，就是服务提供者（ServiceProvider）。</p>
<blockquote>
<p>虽然，绑定一个类到容器不一定非要通过 服务提供者（ServiceProvider） 。</p>
<p>但是，我们知道，有时候我们的类、模块会有需要其他类和组件的情况，为了保证初始化阶段不会出现所需要的模块和组件没有注册的情况，laravel将注册和初始化行为进行拆分，注册的时候就只能注册，初始化的时候就是初始化。拆分后的产物就是现在的 服务提供者。</p>
</blockquote>
<p>服务提供者主要分为两个部分，register（注册） 和 boot（引导、初始化），具体参考文档。register<br>负责进行向容器注册“脚本”，但要注意注册部分不要有对未知事物的依赖，如果有，就要移步至 boot 部分。</p>
<h2 id="Facade"><a href="#Facade" class="headerlink" title="Facade"></a>Facade</h2><p>我们现在解答之前关于 Route 的方法为何能以静态方法访问的问题。实际上这个问题文档上有写，简单说来就是模拟一个类，提供一个静态魔术方法__callStatic，并将该静态方法映射到真正的方法上。</p>
<p>我们使用的 Route 类实际上是 Illuminate\Support\Facades\Route 通过 class_alias() 函数创造的 别名<br>而已，这个类被定义在文件vendor/laravel/framework/src/Illuminate/Support/Facades/Route.php。</p>
<p>我们打开文件一看……诶？怎么只有这么简单的一段代码呢？</p>
<pre><code>&lt;?php namespace Illuminate\Support\Facades;

/**
 * @see \Illuminate\Routing\Router
 */
class Route extends Facade {

    /**
     * Get the registered name of the component.
     *
     * @return string
     */
    protected static function getFacadeAccessor()
    {
        return &apos;router&apos;;
    }

}
</code></pre><p>其实仔细看，会发现这个类继承了一个叫做 Facade 的类，到这里谜底差不多要解开了。</p>
<p>上述简单的定义中，我们看到了 getFacadeAccessor 方法返回了一个 route，这是什么意思呢？事实上，这个值被一个<br>ServiceProvider 注册过，大家应该知道注册了个什么，当然是那个真正的路由类！</p>
<blockquote>
<p>有人会问，Facade<br>是怎么实现的。我并不想说得太细，一个是我懒，另一个原因就是，自己发现一些东西更容易理解，并不容易忘记。很多细节我已经说了，建议大家自行去研究。</p>
</blockquote>
<p>至此，我们已经讲的差不多了。</p>
<h1 id="和平！我们该总结总结了！"><a href="#和平！我们该总结总结了！" class="headerlink" title="和平！我们该总结总结了！"></a>和平！我们该总结总结了！</h1><p>无论如何，世界和平了。</p>
<p>这里要总结的内容就是，其实很多事情并不复杂，怕的是复杂的理论内容。我觉得很多东西一旦想通也就那么回事儿。很多人觉得 laravel这不好那不好、这里难哪里难，我只能说，laravel 的确不是一流和优秀的框架，说 laravel 是一流、优秀的框架的人，不是 laravel的粉丝那么就是跟风炒作。Laravel 最大的特点和优秀之处就是使用了很多 php 比较新（实际上并不新）的概念和技术（也就一堆语法糖）而已。因此laravel 的确符合一个适宜学习的框架。Laravel 的构思的确和其他框架有很大不同，这也要求学习他的人必须熟练 php，并 基础扎实！如果你觉得学laravel 框架十分困难，那么原因只有一个：你 php 基础不好。</p>
<p>另外，善于利用命名空间和面向对象的诸多特性，去追寻一些东西，你会发现，原来这一切这么容易。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/the-end-of-junior/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/the-end-of-junior/" itemprop="url">
                  大三，终结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-07-08T23:42:26+08:00">
                2015-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/边走边想/" itemprop="url" rel="index">
                    <span itemprop="name">边走边想</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/the-end-of-junior/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="the-end-of-junior/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一不小心，大三就在六月份的忙碌中结束了。</p>
<p>仿佛每年都有这么一个最忙路的时间段，而且一如往常的，依然发生在六月。这个月发生了好多事，也做了好多事，还有好多事等待我处理。还以为自己有一个月没更新博客了呢<br>，看看最近一篇博文，发现其实也只有20来天而已，怎么感觉好久没做自己想做的事情了呢。每天都是忙忙忙，但其实是自己不大会分配时间才导致忙得毫无头绪的。</p>
<p>首先，六月份结束了几门主要的课程，所以我立刻就到之前面试的公司去实习了，逃了几节课，但都没点名，有点儿略微失望，只有点名才会有心跳的感觉嘛。六月十二，一个寒<br>窗闲读十几年的学子第一次与别人签订了劳务合同，进入了第一次正式的实习工作，想想都有点儿小激动呢。如今，我来这个公司已经工作大概三周了，感觉还行，我想，暑假过<br>后我还会继续呆在这里。</p>
<p>第二件大事就是找房子了。这仿佛是实习生的宿命，特别是去不大的公司，没有住房补贴，没有分配的房子，再没有什么比找房子更伤脑筋更伤身体的了。其实我大可以不去租房<br>子，因为每天虽然上下班会花费大概三小时，但是这三小时里我也可以做其它事情嘛，但毕竟，我现在不是一个人了，以前是不会意识到有了女朋友要是没有房子会花更多的钱的<br>。。。反正，没有找过房子，永远不知道58同城上到底有多少虚假信息，永远不会怀念在学校1000能住一年的房子，永远不会知道在学校七八块都会被我们骂太贵太难吃的<br>食堂在社会上再也不会有了。天秤座遇到租房这种事，还能说什么呢，想死的心都有了。不过还好，最后找了一个远一点，但是安全舒适，还是和朋友合租，房租加上生活费基本<br>上和工资持平了。总之，好多好多事情我都不知道，而且以我的性格，别人跟我说我也不大会信所以，总得要自己去体会吧(其实最先已经签了一个房子，但住了一天发现太坑，<br>立马退了，还好当时合同签得好，没什么损失)。</p>
<p>再后来就是期末考试的事情了，反正没复习，那个闭卷考试的科目心里没有底，不过对一个已经挂过科还不考研的人来说，已经无所谓了，挂科了最多也就是下学期开学再来半天<br>嘛。</p>
<p>在技术方面，这个月真的没怎么学习，就偶尔看了看慕课网上的东西，在学习深度上并没有增加，我想，在公司多待一会儿应该就可以了，至少实战经验要多得多嘛。只是，现在<br>的公司在技术深度上可能并没有达到我想要的底部，不过也可能是我对项目了解得不够深，反正这里有高手，等我证明自己比他们强了再说。</p>
<p>其实，这个月最大的感悟是有些事不能忘记，阅读这个东西是绝对不能抛弃的。我现在动不动就发怒；知道自己有梦想，但是平时很少去想过到底怎么去实现，还抛弃了很多应该<br>有的所谓的道德方面的思想，反正就是很忙，获得像行尸走肉，没有灵魂的活着。反正就感觉自己挺俗的，我可不想这样，从初中开始我就励志要做一个平凡的人，但，绝不能平<br>庸。</p>
<p>忙，并不总是能让人充实，但阅读一定能让人充实。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/python-use-redis/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python-use-redis/" itemprop="url">
                  Python Redis模块的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-29T21:42:08+08:00">
                2015-05-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/python-use-redis/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="python-use-redis/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python可以使用redis模块直接操作Redis数据库</p>
<p>PyPI文档：<a href="https://pypi.python.org/pypi/redis/2.10.3" target="_blank" rel="external">https://pypi.python.org/pypi/redis/2.10.3</a></p>
<p>可直接使用pip进行安装。</p>
<p>redis-py使用两个类来完成Redis的操作。</p>
<p>redis-py使用一个连接池来管理Redis server。每个Redis实例都默认会创建自己的连接池。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><pre><code>import redis
# 数据库的连接
r = redis.StrictRedis(host=&apos;localhost&apos;, port=6379, db=0)
r.set(&apos;foo&apos;, &apos;bar&apos;)   # 添加一条记录
r.get(&apos;foo&apos;)          # 获取某字段的值
</code></pre><p>如果是使用连接池创建的，那么可以直接从连接池获取对象实例：</p>
<pre><code>pool = redis.ConnectionPool(host=&apos;localhost&apos;, port=6379, db=0)
r = redis.Redis(connection_pool=pool)
</code></pre><h2 id="Pipelines"><a href="#Pipelines" class="headerlink" title="Pipelines"></a>Pipelines</h2><p>Pipelines是redis的一个子类，用于同时提交多条命令(批量执行)，依次减少TCP请求，提高性能。常见使用方法：</p>
<pre><code>r = redis.Redis(......)
pipe = r.pipeline()




# 这样下面的redis命令都会先被缓冲




pipe.set(&apos;foo&apos;, &apos;bar&apos;)
pipe.get(&apos;bing&apos;)




# 下面的命令会提交所有的命令到服务器




pipe.execute()




# 十分高级的魔术方法：




pipe.set(&apos;foo&apos;, &apos;bar&apos;).sadd(&apos;faz&apos;, &apos;baz&apos;).incr(&apos;auto_number&apos;).exectue()
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/python-beautifulsoup-parse-html-xml/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/python-beautifulsoup-parse-html-xml/" itemprop="url">
                  Python使用beautifulsoup解析HTML、XML
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-22T23:21:57+08:00">
                2015-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/python-beautifulsoup-parse-html-xml/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="python-beautifulsoup-parse-html-xml/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python官方文档都说自己解析XML的方式存在漏洞了，那我也只能用他推荐的了。</p>
<p>这里我使用的BeautifulSoup，因为其中文文档十分完整清晰，而且相比于defusedxml，它不仅可以解析XML还可以解析HTML，非常方便。<a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html" target="_blank" rel="external">文档地址</a></p>
<p>另外，如果是简单的网页解析任务，可以直接将获取到的网页进行正则表达式匹配也可以达到效果，只是可能会出现各种编码各种错误问题</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 直接apt安装</div><div class="line">$ sudo apt-get install Python3-bs4  # 这将安装下面两个包</div><div class="line"></div><div class="line"># pip方式安装</div><div class="line">$ pip3 install beautifulsoup4   # 这样直接安装或者下载源码进行安装</div><div class="line">$ pip3 install lxml             # 如果是解析xml必须安装一个解析器，文档里说的那个解析器只有这个好安装点，需要提前安装好依赖，apt-get install libxml2-dev, libxslt1-dev, python-dev，还可以使用html.parser这个解析器，这个解析器不会自动添加body元素,CentOS用yum -y install python-devel gcc libxml2 libxml2-devel libxslt libxslt-devel</div></pre></td></tr></table></figure>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>TAG：表示xml/html里面的一个元素(节点)，包括标签以及其里面的内容</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>最简单的使用例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import urllib.request</div><div class="line">from bs4 import BeautifulSoup</div><div class="line"></div><div class="line">content = &quot;&lt;b&gt;&lt;!--Hey, buddy--&gt;&lt;/b&gt;&quot;   # 表示网页内容</div><div class="line">content = urllib.request.urlopen(url)  # 通常做爬虫的时候html来自于网页</div><div class="line">soup = BeautifulSoup(content)          # 解析，生成一个bs4.BeautifulSoup</div><div class="line">comment = soup.b.string                # 获取&lt;b&gt;标签的内容</div></pre></td></tr></table></figure>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 查找标签</span></div><div class="line">soup.a             <span class="comment"># 查找第一个a标签，返回值就是一个TAG&lt;class 'bs4.element.Tag'&gt;</span></div><div class="line">soup.find(<span class="string">'a'</span>)     <span class="comment"># 同上，都只是查找满足条件的第一个</span></div><div class="line">soup.find_all(<span class="string">'a'</span>) <span class="comment"># 查找所有的a标签，返回一个list获取内容</span></div><div class="line">soup.find_all(<span class="string">'a'</span>, class_=<span class="string">'name'</span>)  <span class="comment"># 根据标签的属性进行查找，比如这里查找class这个属性为name的a标签</span></div><div class="line">soup.find_all(text=<span class="string">""</span>) <span class="comment"># 在整个文档中查找一个字符串</span></div><div class="line">soup.find_all(<span class="string">'a'</span>, limit=<span class="number">3</span>) <span class="comment"># 限制只找三个结果</span></div><div class="line">soup.find_all(<span class="string">'a'</span>, recursive=<span class="keyword">False</span>) <span class="comment"># 只找直接子节点而不递归查找#</span></div><div class="line">soup.find(<span class="string">'a'</span>, &#123;<span class="string">'class'</span>: <span class="string">'title abc'</span>&#125;)	<span class="comment"># 直接指定css，适用于比较复杂的css</span></div><div class="line"></div><div class="line"><span class="comment"># CSS选择器</span></div><div class="line">soup.select(<span class="string">'a'</span>) <span class="comment"># 查找a标签，结果是列表</span></div><div class="line">soup.select(<span class="string">'.title'</span>) <span class="comment"># 查找类为title的标签</span></div><div class="line">soup.select(<span class="string">'#name'</span>)  <span class="comment"># 查找id为name的标签</span></div></pre></td></tr></table></figure>
<h2 id="获取内容"><a href="#获取内容" class="headerlink" title="获取内容"></a>获取内容</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">soup.prettify()	# 直接获取所有内容</div><div class="line"></div><div class="line">tag.name        # 如果是Tag，那么返回它本身，例如，如果是a标签，那就返回a；如果是soup对象，那么返回[document]，返回值都是str类型</div><div class="line">tag.attrs       # 获取该标签的属性，返回的是一个字典，例如，如果有个a标签是&lt;a class=&quot;a&quot; href=&quot;#&quot;&gt;&lt;/a&gt;那么返回&#123;&apos;class&apos;: &apos;a&apos;, &apos;href&apos;: &apos;#&apos;&#125;</div><div class="line">soup.a[&apos;class&apos;] # 直接获取a标签的class属性值</div><div class="line">soup.a.get(&apos;class&apos;] # 同上</div><div class="line"></div><div class="line">soup.a.string   # 获取标签内的内容，内部所有的字符串，&lt;a&gt;文字部分&lt;/a&gt;</div><div class="line">soup.a.stripped_strings	# 获取标签内所有的字符串，可以去除空白和空行</div><div class="line">soup.a.text     # 获取标签内文字部分&lt;span&gt;abc&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/span&gt; 获取abc</div><div class="line">soup.prettify() # 获取所有内容</div><div class="line"></div><div class="line">soup.find_all(string=lambda text:isinstance(text, Comment))	# 获取所有的注释</div></pre></td></tr></table></figure>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">tag.string = <span class="string">''</span>	<span class="comment"># 修改标签内部的字符串</span></div><div class="line">tag.append(<span class="string">"hello"</span>)	<span class="comment"># 直接在内部字符串后面添加字符串</span></div><div class="line">new_tag = soup.new_tag(<span class="string">'a'</span>, href=<span class="string">'https://haofly.net'</span>)	<span class="comment"># 添加一个tag</span></div><div class="line">original_tag.append(new_tag)</div><div class="line"></div><div class="line">tag.clear()		<span class="comment"># 移除tag内部所有的内容</span></div><div class="line">tag.decompose()	<span class="comment"># 移除tag内部所有内容以及tag本身</span></div><div class="line">tag.extract()	<span class="comment"># 移除当前tag</span></div></pre></td></tr></table></figure>
<h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><p>获取tag内的字符串用tag.string，可以通过unicode方法将NavigableString对象转换成Unicode字符串，如unicode_st<br>ring = unicode(tag.string)</p>
<h2 id="TroubleShooting"><a href="#TroubleShooting" class="headerlink" title="TroubleShooting"></a>TroubleShooting</h2><ul>
<li>如果出现无法找到某些真的存在的标签，可能原因是选择的解析器有问题，可以将lxml换成html5lib</li>
</ul>
<p>如果要获取xml/html中的注释使用Comment对象，如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">markup = &quot;&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;&quot;</div><div class="line">soup = BeautifulSoup(markup)</div><div class="line">comment = soup.b.string</div><div class="line">commment就是注释的东西</div><div class="line">print(comment)</div><div class="line">&gt;&gt;&gt;u&apos;Hey, buddy. Want to buy a used parser&apos;</div><div class="line">可以</div><div class="line">print(soup.b.prettify())打印全部&lt;b&gt;</div><div class="line">也可以用CDATA替代注释：如</div><div class="line">from bs4 import CData</div><div class="line">cdata = CData(&quot;A CDATA block&quot;)</div><div class="line">comment.replace_with(cdata)</div><div class="line"></div><div class="line"></div><div class="line">print(soup.b.prettify())</div><div class="line">打印：</div><div class="line">&lt;b&gt;&lt;![CDATA[A CDATA block]]&gt;&lt;/b&gt;</div></pre></td></tr></table></figure>
<p>通过点去属性的方式只能获得当前名字的第一个tag，如果要得到所有的就用soup.find_all(‘a’)</p>
<p>tag的.contents属性可以将tag的子节点以列表的方式输出(包括子节点的所有内容)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">head_tag = soup.head</div><div class="line">head_tag # &lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;  </div><div class="line"></div><div class="line">head_tag.contents</div><div class="line">[&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]</div><div class="line"></div><div class="line">title_tag = head_tag.contents[0]</div><div class="line">title_tag</div><div class="line"></div><div class="line">#&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;  </div><div class="line"></div><div class="line">title_tag.contents</div><div class="line"></div><div class="line">[u&apos;The Dormouse&apos;s story&apos;]</div></pre></td></tr></table></figure>
<p>BeautifulSoup对象本身一定会包含子节点，也就是说<html>标签也是该对象的子节点，如 soup.contents[0].name就是html</html></p>
<p>通过tag的.children生成器，可以对tag的子节点进行循环：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for child in title_tag.children:</div><div class="line">    print(child)</div><div class="line">    # The Dormouse&apos;s story</div></pre></td></tr></table></figure>
<p>。desendants属性可以对所有tag的子孙节点进行递归循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for child in head_tag.descendants:</div><div class="line">    print(child)</div><div class="line">    # &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</div><div class="line">    # The Dormouse&apos;s story</div><div class="line">字符串也是一个子节点</div></pre></td></tr></table></figure>
<p>如果tag只有一个NavigableString类型的子节点，就可以用title_tag.string访问子节点</p>
<p>如果tag包含多个字符串就用.strings来循环，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">for string in soup.strings:</div><div class="line">    print(repr(string))</div><div class="line">    # u&quot;The Dormouse&apos;s story&quot;</div><div class="line">    # u&apos;\\n\\n&apos;</div><div class="line">    # u&quot;The Dormouse&apos;s story&quot;</div><div class="line">    # u&apos;\\n\\n&apos;</div></pre></td></tr></table></figure>
<p>使用soup.stripped_strings代替soup.strings可以去掉空白或空行项</p>
<p>父节点就正好相反了，.parent得到父节点，.parents递归得到元素的所有父节点</p>
<p>兄弟节点：.next_sibling，.previous_sibling来访问，通过.next_siblings和.previous_siblings属性对<br>当前节点的兄弟节点迭代输出for sibling in soup.a.next_siblings:这样子</p>
<p>回退和前进：.next_element和.previouw_element，.next_elements和.previous_elements</p>
<p>查找</p>
<p>find和find_all，还可以传入正则表达式，如soup.find_all(re.compile(“^b”))如果传入的是列表，将会与列表中任一元素匹配<br>的内容返回，true可以匹配任何标签，如soup.find_all(True)</p>
<p>检查是否包含属性tag.has_attr(‘class’)</p>
<p>find_all( <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh
.html#id32" target="_blank" rel="external">name</a> , <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/ind
ex.zh.html#css" target="_blank" rel="external">attrs</a> , <a href="http://www.crummy.com/software/BeautifulSoup/bs4
/doc/index.zh.html#recursive" title="Link:
http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html#recursive" target="_blank" rel="external">recursive</a> , <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html#
text" target="_blank" rel="external">text</a> , <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/index.
zh.html#keyword" target="_blank" rel="external">**kwargs</a> )</p>
<p>attr表示具有该属性的name标签，text可以搜索非标签的字符串内容，如soup.find_all(text=”wang”)</p>
<pre><code>soup.find_all(id=&quot;link2&quot;)[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]
</code></pre><p>limit参数：find_all()方法返回全部的搜索结果，如果文档数很大那么搜索会很慢，如果不需要全部结果，可以用limit参数，类似于SQL中的limi<br>t，如soup.find_all(“a”, limit=2)</p>
<p>如果只搜索直接子节点，就加上recursive=False参数</p>
<p>可以不用指明find_all，如soup.find_all(“a”)可以用soup(“a”)代替，soup.title.find_all(text=True<br>)可以用soup.title(text=True)代替</p>
<p>其他功能，按CSS搜索、支持CSS选择器，支持修改文档树</p>
<p>find()方法至返回一个，其他的还有find_parents()和find_parent()，find_next_siblings()，find_next<br>_sibling()，find_previous_siblings()，find_previous_sibling()，find_all_next()，fi<br>nd_next()，find_all_previous()，find_previous()</p>
<p>如果只想得到tag中包含的文本内容，那么就可以用get_text()方法，获取到tag包含的所有文本内容包括子孙tag中的内容</p>
<p>注：beautifulsoup会自动将tag变为小写，只有添加”xml”选项才能大小写敏感，因为不指定就默认是html，html的标签对大小写不敏感，所以推<br>荐还是把lxml XML解析器安上，不过要先弄上什么C语言库</p>
<h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><pre><code># 删除当前节点
tag.extract()  

# 插入节点
new_tag = &apos;&lt;url&gt;dagasgga&lt;/url&gt;&apos;
new_tag = BeautifulSoup(new_url, &apos;html.parser&apos;)
soup.tag.insert(位置如1, new_tag)
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/laravel-IoC-DI/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/laravel-IoC-DI/" itemprop="url">
                  Laravel使用IoC模式(DI、依赖注入)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-17T16:19:06+08:00">
                2015-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程之路/" itemprop="url" rel="index">
                    <span itemprop="name">编程之路</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/laravel-IoC-DI/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="laravel-IoC-DI/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考文章：<a href="https://phphub.org/topics/607" target="_blank" rel="external">https://phphub.org/topics/607</a> (以下内容基本上都摘自该文章)</p>
<p>IoC这个主题我已经收藏了很久了，直到今天才有空深入地理解了一遍Laravel的IoC模式。</p>
<p>前几天在使用LeanCloud的Python SDK，我就在想，每次连接LeanCloud的存储服务都需要先创建一个连接，如果要执行其它的操作，那又得新建那<br>个连接了。IoC就是为了解决每次都重复连接的一种编码模式，通过依赖注入减少耦合。</p>
<p>上面引用的参考文章里已经注明了为什么我们在这种情况下一定要使用依赖注入，这里我就只记录下到底该如何使用该模式。</p>
<p>Laravel的依赖注入是使用的“容器”这个概念，是一种全局注册表，使用容器的依赖注入作为一种桥梁来解决依赖可以使我们的代码耦合度耕地，很好的降低了组件的复<br>杂性。示例代码如下：</p>
<pre><code>&lt;?php




class SomeComponent\{      # 组件
    protected $_di;      # 一个私有变量





public function __construct($di)\{
    $this-&amp;gt;_di = $di;
\}

public function someDbTask()\{
    // 通过get获取connection service总是返回一个新的连接
    $connection = $this-&amp;gt;_di-&amp;gt;get(&apos;db&apos;);
\}

public function someOtherDbTask()\{
    // 和上面不同，这里获取的是共享的连接
    $connection = $this-&amp;gt;_di-&amp;gt;getShared(&apos;db&apos;);

    //This method also requires a input filtering service
    $filter = $this-&amp;gt;_db-&amp;gt;get(&apos;filter&apos;);
\}
</code></pre><p>}</p>
<p>$di = new Phalcon\DI(); // 创建一个容器</p>
<p>// 在容器中注册一个名为’db’的服务，用于连接数据库，并返回该连接 $di-&gt;set(‘db’, function(){ return new<br>Connection(array( “host” =&gt; “localhost”, “username” =&gt; “root”, “password” =&gt;<br>“secret”, “dbname” =&gt; “invo” )); });</p>
<p>// 在容器中注册一个名为’filter’的服务 $di-&gt;set(‘filter’, function(){ return new Filter();<br>});</p>
<p>// 在容器中注册一个名为’session’的服务 $di-&gt;set(‘session’, function(){ return new<br>Session(); });</p>
<p>// 将容器作为一个参数传递到构造函数中去 $some = new SomeComponent($di);</p>
<p>$some-&gt;someTask();</p>
<p>现在，该组件只有访问某种service的时候才需要它，如果它不需要，它甚至不会被初始化，以节约资源。Phalcon\DI是一个实现了服务的依赖注入功能的组件<br>，它本身就是一个容器。由于Phalcon高度解耦，Phalcon\DI是框架用来集成其他组件的必不可少的部分，开发人员也可以使用这个组件依赖注入和管理应用程<br>序中不同类文件的实例。</p>
<p>在容器中注册服务，框架本身或开发人员都可以注册服务。当一个组件A要求调用组件B(或它的类的一个实例)，可以从容器中请求调用组件B，而不是创建组件B的一个实例<br>。</p>
<h3 id="注入方法"><a href="#注入方法" class="headerlink" title="注入方法"></a>注入方法</h3><p>服务可以通过以下几种方式注入到容器：</p>
<pre><code>&lt;?php




// 首先要创建一个依赖注入容器
$di = new Phalcon\\DI();




// 通过类名注入
$di-&gt;set(&quot;request&quot;, &apos;Phalcon\\Http\\Request&apos;);




// 通过匿名函数注入Using an anonymous function, the instance will lazy loaded
$di-&gt;set(&quot;request&quot;, function()\{
    return new Phalcon\\Http\\Request();
\});




// 直接用一个实例来注入
$di-&gt;set(&quot;request&quot;, new Phalcon\\Http\\Request());




// 通过数组来注入
$di-&gt;set(&quot;request&quot;, array(
    &quot;className&quot; =&gt; &apos;Phalcon\\Http\\Request&apos;,
    &quot;parameters&quot; =&gt; array(
            parameter&quot; =&gt; array(
                &quot;host&quot; =&gt; &quot;localhost&quot;,
            )
        )
    )
));
</code></pre><p>在容器中，通过数组，字符串等方式存储的服务都将被延迟加载，即只有在请求对象的时候才被初始化。</p>
<p>从容器获得服务：</p>
<pre><code>&lt;?php $request = $di-&gt;get(&quot;request&quot;);
//或者使用魔术方法
$request = $di-&gt;getRequest();
</code></pre><p>其它相关文章：</p>
<h1 id="PHP程序员如何理解IoC-DI-http-segmentfault-com-a-1190000002411255-“Link"><a href="#PHP程序员如何理解IoC-DI-http-segmentfault-com-a-1190000002411255-“Link" class="headerlink" title="[PHP程序员如何理解IoC/DI](http://segmentfault.com/a/1190000002411255 “Link:"></a>[PHP程序员如何理解IoC/DI](<a href="http://segmentfault.com/a/1190000002411255" target="_blank" rel="external">http://segmentfault.com/a/1190000002411255</a> “Link:</h1><p><a href="http://segmentfault.com/a/1190000002411255" target="_blank" rel="external">http://segmentfault.com/a/1190000002411255</a>“ )</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/vps-nginx-reverse-proxy/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/vps-nginx-reverse-proxy/" itemprop="url">
                  Vps上使用nginx反向代理某些你懂的网站
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-16T20:38:05+08:00">
                2015-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/就是爱玩/" itemprop="url" rel="index">
                    <span itemprop="name">就是爱玩</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/vps-nginx-reverse-proxy/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="vps-nginx-reverse-proxy/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前在Github的学生计划中获得的$100 Digitalocean支付券放在那里没怎么用，由于今天碰巧登录不上1024，于是想到直接通过自己的vps来做<br>反向代理试试(之所以不用shadowsocks，是因为我在DO上搭建的shadowsocks一直都很慢，慢得我无法原谅。。。)</p>
<p>好了，这里说一下ubuntu server上通过nginx反向代理http网站的过程：</p>
<p>首先是一条命令安装nginx<code>sudo apt-get install nginx</code></p>
<p>然后直接修改nginx的server配置文件<em>/etc/nginx/sites-enabled/default</em>，修改为如下：</p>
<pre><code>server \{
        listen 100;  # 指定端口地址
        server_name localhost;





    access_log /var/log/nginx/access_100.log
    error_log /var/log/nginx/error_100.log;
    location / \{
            sub_filter haofly.net localhost;
            proxy_pass http://haofly.net;
            proxy_redirect http://haofly.net  /;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Referer http://$host;
    \}
</code></pre><p>}</p>
<p>如果有多个就写多个server，之后就可以使用服务器的IP+端口访问haofly.net网站了。</p>
<p>反向代理的速度和直接访问院网站的速度几乎一样，所以我想到了其它的用途，比如Ubuntu的官方镜像源的代理等。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/tiancaizaizuo,fengzizaiyou/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/tiancaizaizuo,fengzizaiyou/" itemprop="url">
                  《天才在做 疯子在右》——他们真的是疯子吗
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-10T10:59:41+08:00">
                2015-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/tiancaizaizuo,fengzizaiyou/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="tiancaizaizuo,fengzizaiyou/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>听了很久这本书的传说，上个月终于买来读完了。读完后，我又产生了一个很大的问题：他们真的是疯子吗？还是，我们才是疯子？到底谁对谁错？他们中是不是有人并不是疯子<br>？</p>
<p>好吧，以前一直以为这本书是讲天才是怎么样的，买来后刊封面，我操，“国内第一本精神病人访谈手记”，原来作者是花了那么长的时间去采访，让我们了解到疯子抑或是天才<br>真正的内心世界。</p>
<p>我也曾有一位亲人不知道什么原因，后来被送去精神病院了(现在又出来了)。当时他患病的时候，看他那眼神，仿佛一直在思考什么，但是我那时候很怕，大人们更是不会去跟<br>一个精神病患者讲太多的话。要是现在，我肯定会视图去了解他，而不是站在一旁远离他。</p>
<p>哲学、文学、天文地理，他们好像比真的天才更天才。这本书，让我重新开始审视身边那些与众人想法不同的人(当然，我认为我也是这样的人)，开始偶尔去深入他们的内心世<br>界。曾经的我以为只有我是有梦想、有追求的人，但到了大三，看了很多人，发现，每个人都有这样的想法，更多的人其实都在走自己的路，并不是每个人都在阿谀奉承、追名逐<br>利。这本书教会了我用心去观察周围的人和事。</p>
<p>很多人觉得这本书很假，但是无论是否有虚构的部分，这本书都很真。</p>
<p><strong>经典语录：</strong></p>
<p><em>想看到真正的世界，就要用天的眼睛去看天，用云的眼睛去看云，用风的眼睛去看风，用花草树木的眼睛去看花草树木，用石头的眼睛去看石头，用大海的眼睛去看大海，用动<br>物的眼睛去看动物，用人的眼睛去看人。</em></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/chengxuyuanjiankangzhinan/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/chengxuyuanjiankangzhinan/" itemprop="url">
                  《程序员健康指南》——以编程的方式去维护健康
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-09T10:56:43+08:00">
                2015-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/chengxuyuanjiankangzhinan/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="chengxuyuanjiankangzhinan/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>其实最先写这篇读后感我是拒绝的，因为关于健康的书看多了，感觉都差不多，但当我回过头来翻看的时候，发现这本书有很多的观点都是需要深深体会的。</p>
<p>作者Joe Kutner本就是一位运动员和健身教练出身的程序员，所以对程序员的健康问题有深入的了解，也在这方面进行了大量的实践和研究，最后以程序员的思维来写<br>作这本书。所以在图灵教育上，这本书也是挺火的。</p>
<h2 id="饮食"><a href="#饮食" class="headerlink" title="饮食"></a>饮食</h2><p>书中引用马克吐温的话：“保持身体健康的唯一办法，就是吃点你不想吃的，喝点你不想喝的，以及做点你不愿做的事情。”</p>
<p>相信很多人都和我一样，小时候很多东西不愿意吃就坚决不吃，挑食，只吃自己爱吃的，由于我父母在教育方式上存在一些瑕疵，只要我说不想吃的，基本上一次过后就再也不会<br>做那些菜了，以致现在全家人的口味都差不多了，而且菜的种类都比较少。长大后偶尔会吃到以前讨厌的菜，虽然仍然有点儿难以下咽，但都知道了，那些东西吃了确实对自己身<br>体比较好，然后妈妈就会问：你不是不喜欢吃这个吗，怎么现在要吃了。始终，父母是爱我们的，只是，在饮食上，前20年我们几乎不能自己做主，之后的生活一定要注意，我<br>也喜欢尝尝不同的东西。</p>
<p>能让我们有饱腹感又不会产生多余能量的食物：蛋白质、全谷类食品</p>
<h2 id="运动"><a href="#运动" class="headerlink" title="运动"></a>运动</h2><p>我的运动比较单调，我喜欢散步，喜欢慢跑，基本上每周会跑三四次，所以现在在运动上我到没有什么了，只是可能动作上有一些不符合规范，长期以往，对身体可能会造成伤害<br>，所以需要研究一下这个。</p>
<h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><p>办公桌、健身器材，我应该马上就能过上自己想要的生活(独立、经济自由)，所以马上我就得为这些东西考虑了。</p>
<p>关于眼睛的保护，对于每天面对几个小时电脑的程序员来说，隐形眼睛完全不合适，防辐射眼睛，可能会有作用，购买没有过度炫光的显示器和减少显示屏色温(减少蓝色光)。</p>
<p>通过我上个月一下减10斤的经验，只有持之以恒，饮食规律，就是最好的减肥方式。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://haofly.net/nidegudu,suibaiyourong/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="haofly">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="豪翔天下">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="豪翔天下" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/nidegudu,suibaiyourong/" itemprop="url">
                  《你的孤独，虽败犹荣》——孤独是什么
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-03T21:31:59+08:00">
                2015-05-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/韦编三绝/" itemprop="url" rel="index">
                    <span itemprop="name">韦编三绝</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/nidegudu,suibaiyourong/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="nidegudu,suibaiyourong/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>此书和刘同两年前的《谁的青春不迷茫》的风格不同，此书通过几十个身边的小人物来展现人生各个时期的孤独，以独有的价值观去从普通人不一样的角度看问题。或许是我刚开<br>始谈恋爱，所以感觉突然忘了以前的那种孤独感，即使是有朋友也会有一个人的孤独。以前我一直想，要看自己是不是一个孤独的人，就要看自己一个人行走在安静或嘈杂的环境<br>下能否进入自己的内心而不被外界干扰。</p>
<p>现在玩儿的最好的一堆朋友就是初中的那群朋友，大概有十个左右，我们每年过年都会聚餐，不只一次，如果可以，寒假每天都会一起上街吃烧烤，这样的日子每年都会有，我到<br>不担心会失去，因为家乡那个小镇，逛过去逛过来都是这几个朋友。初识孤独的感觉大概是从高中开始，和初中朋友分开过后，我独自一人跑到隔壁县去上学，每个月只能和他们<br>见一次，我高中的时候最喜欢一个人跑到公园的池边看往来的人群，那时候的孤独，不是没朋友，而是，能说心里话的人都不在身边。那时候很流行一句话：“越长大越孤单”。<br>是啊，我们渐渐长大，很多朋友都因为空间的隔离而渐行渐远，曾经的朋友会因为各自新的朋友的不同而渐渐产生隔阂，虽然朋友一生一起走，那些日子不再有，但一声朋友，就<br>绝对是一辈子的事。</p>
<p>今年大三，暑假就开始实习了，这是迈向未来生活重要的一步，也是以后生活的开端。一直都很憧憬，以后所有朋友都在身边的场景，正如本书所说：“在一个毫无生机的城市里<br>，有一群朋友最大的好处就是，随时随地能够为任何一个理由团聚庆功、畅想未来。”那样的感觉肯定很好，和他们在夜市里唱歌，遥想未来，每个月拿着微薄的工资也能每天开<br>开心心快快乐乐的，那绝对是人生最美好的时光。</p>
<p>其实我现在还处于“为赋新词强说愁”的状态，呵呵，人生，很精彩，未来很美好，尽力成为我能成为的人吧。很庆幸，二十几岁了，我还在为梦想奋斗。</p>
<p><strong>经典语录：</strong></p>
<p><em>也许能力不够，所以至今不能真正满足自己内心的愿望。也许足够幼稚，所以至今仍会用这一招骗骗自己。</em></p>
<p><em>还记得十年前那个期待见识这个世界的少年吗？你还认得出这是你十年后想成为的那个风尘仆仆的大叔吗？</em></p>
<p><em>当初你不愿听的歌，总有一天会为一个人而听。当初你不愿品尝的食物，总有一天会为一个人去品尝。对于你，也一定会有一个人愿意陪你看你想看的电影，去所有你想去的地<br>方，看所有你写过的日记。你不爱人，人不爱你，不是报应，只是时间问题。</em></p>
<p><em>我们没有成为我们曾以为的，我们成为了我们能成为的。</em></p>
<p><em>在一个毫无生机的城市里，有一群朋友最大的好处就是，随时随地能够为任何一个理由团聚庆功、畅想未来。</em></p>
<p><em>所有因为某人而让自己生气的事情，一定要说出来。不说的话，自己越想就越生气。说出来之后，自己踏实了，对方就会变得不踏实。如果心里因人不爽，最好的办法就是说出<br>来告诉对方。一来自己不会再纠结，二来可以让对方纠结，三来如果对方并不因此纠结，就证明对方压根儿不在意你，那你又何必要为不在意你的人影响自己的心情。有话就说的<br>人不是直肠子，而是不会让自己辛苦的透明人。</em></p>
<p><em>一个男人的帅来自于他的性格，一个男人的魅力来自于他的自知，一个男人的强大来自于他对自己的苟刻。</em></p>
<p><em>你的过去我来不及参与，你的未来我奉陪到底。</em></p>
<p><em>你以为做的一切都是为了身边最亲近的人，后来你才知道最亲近的人最需要你做的只是你在身边。</em></p>
<p><em>大多数人不会在同一个地方工作一辈子，大多数人也不会在同一个岗位做一辈子，我们所有的累积都是为了给人生最后的那个位置打一个稳定的根基，所以每个获取经验的机会<br>都显得尤为重要。如果所有人工作时间都一样，工作质量拼的就是纯粹的智商和情商，你看了看自己在镜子中的样子——完全没有任何一点男一号的气质啊，不在后天努力，就只<br>能成为这出人生剧中的路人甲乙丙丁了。</em></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="haofly" />
          <p class="site-author-name" itemprop="name">haofly</p>
          <p class="site-description motion-element" itemprop="description">豪翔天下的个人博客</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">147</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/haoflynet" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/haoflynet" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              小伙伴们
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.phodal.com" title="Phodal" target="_blank">Phodal</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zkzhao.github.io/" title="zkzhao" target="_blank">zkzhao</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.qingguoing.com/" title="倾国倾城的博客" target="_blank">倾国倾城的博客</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">haofly</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"haoflynet"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
